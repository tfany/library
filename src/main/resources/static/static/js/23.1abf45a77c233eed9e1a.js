webpackJsonp([23],{gEzv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),l=a.n(n),i=a("UgCr"),s=a("s/Rn"),r=a("mRsl"),o={keyword:null,pageNum:1,pageSize:5,publishStatus:null,verifyStatus:null,productSn:null,productCategoryId:null,brandId:null},u={name:"productList",data:function(){return{operateType:null,listQuery:l()({},o),list:null,total:null,listLoading:!0,selectProductCateValue:null,multipleSelection:[],productCateOptions:[],supplierOptions:[]}},created:function(){this.getList(),this.getBrandList(),this.getProductCateList()},watch:{selectProductCateValue:function(t){null!=t&&2==t.length?this.listQuery.productCategoryId=t[1]:this.listQuery.productCategoryId=null}},methods:{getProductSkuSp:function(t,e){return 0===e?t.sp1:1===e?t.sp2:t.sp3},getList:function(){var t=this;this.listLoading=!0,Object(i.b)(this.listQuery).then(function(e){t.listLoading=!1,t.list=e.data.list,t.total=e.data.total})},getBrandList:function(){var t=this;Object(s.c)({pageNum:1,pageSize:100}).then(function(e){t.supplierOptions=[];for(var a=e.data.list,n=0;n<a.length;n++)t.supplierOptions.push({label:a[n].supplierName,value:a[n].supplierId})})},getProductCateList:function(){var t=this;Object(r.d)().then(function(e){var a=e.data;t.productCateOptions=[];for(var n=0;n<a.length;n++){var l=[];if(null!=a[n].children&&a[n].children.length>0)for(var i=0;i<a[n].children.length;i++)l.push({label:a[n].children[i].categoryName,value:a[n].children[i].categoryId});t.productCateOptions.push({label:a[n].categoryName,value:a[n].categoryId,children:l})}})},getParentNameById:function(t){for(var e=null,a=0;a<this.productCateOptions.length;a++)this.productCateOptions[a].value===t&&(e=this.productCateOptions[a].label);return e},handleSearchList:function(){this.listQuery.pageNum=1,this.getList()},handleAddProduct:function(){this.$router.push({path:"/pms/addProduct"})},handleBatchOperate:function(){var t=this;null!=this.operateType?null==this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要操作的书籍",type:"warning",duration:1e3}):this.$confirm("是否要进行该批量操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=multipleSelection[0].id;t.updateDeleteStatus(1,e),t.getList()}):this.$message({message:"请选择操作类型",type:"warning",duration:1e3})},handleSizeChange:function(t){this.listQuery.pageNum=1,this.listQuery.pageSize=t,this.getList()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=l()({},o)},handleDelete:function(t,e){var a=this;this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];t.push(e.bookId),a.updateDeleteStatus(1,t),a.getList()})},handleUpdateProduct:function(t,e){this.$router.push({path:"/pms/updateProduct",query:{id:e.bookId}})},updateDeleteStatus:function(t,e){var a=this,n=new URLSearchParams;n.append("ids",e),n.append("deleteStatus",t),Object(i.g)(n).then(function(t){a.$message({message:"删除成功",type:"success",duration:1e3})}),this.getList()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("div",[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.handleSearchList()}}},[t._v("\n          查询结果\n        ")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(e){t.handleResetSearch()}}},[t._v("\n          重置\n        ")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-form",{attrs:{inline:!0,model:t.listQuery,size:"small","label-width":"140px"}},[a("el-form-item",{attrs:{label:"输入搜索："}},[a("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"书籍名称"},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword",e)},expression:"listQuery.keyword"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"书籍编号："}},[a("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"书籍编号"},model:{value:t.listQuery.productSn,callback:function(e){t.$set(t.listQuery,"productSn",e)},expression:"listQuery.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"书籍分类："}},[a("el-cascader",{attrs:{clearable:"",options:t.productCateOptions},model:{value:t.selectProductCateValue,callback:function(e){t.selectProductCateValue=e},expression:"selectProductCateValue"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"供应商："}},[a("el-select",{attrs:{placeholder:"请选择供应商",clearable:""},model:{value:t.listQuery.brandId,callback:function(e){t.$set(t.listQuery,"brandId",e)},expression:"listQuery.brandId"}},t._l(t.supplierOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1)]),t._v(" "),a("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-tickets"}),t._v(" "),a("span",[t._v("数据列表")]),t._v(" "),a("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(e){t.handleAddProduct()}}},[t._v("\n        添加\n      ")])],1),t._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"productTable",staticStyle:{width:"100%"},attrs:{data:t.list,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{label:"书籍编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.bookId))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"书籍图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"80px"},attrs:{src:t.row.img}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"书籍名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.bookName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"作者"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.author))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t.getParentNameById(e.row.bookCategory.parentId))+" / "+t._s(e.row.bookCategory.categoryName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"供应商"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.supplier.supplierName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"价格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("价格：￥"+t._s(e.row.price))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.stock))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleUpdateProduct(e.$index,e.row)}}},[t._v("编辑\n              ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除\n              ")])],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":t.listQuery.pageSize,"page-sizes":[5,10,15],"current-page":t.listQuery.pageNum,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"pageNum",e)}}})],1),t._v(" "),t._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("br"),this._v(" "),e("br"),this._v(" "),e("br"),this._v(" "),e("br")])}]};var d=a("VU/8")(u,c,!1,function(t){a("kStZ")},null,null);e.default=d.exports},kStZ:function(t,e){}});
//# sourceMappingURL=23.1abf45a77c233eed9e1a.js.map