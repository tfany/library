webpackJsonp([26],{YlV5:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("UgCr"),a=s("FWz8"),r=s("vMJZ"),o={name:"detailPage",data:function(){return{value:{},day:1,count:1,user:null}},created:function(){this.getBook(),this.getUserIfo()},filters:{formatPrice:function(t){return t.toFixed(4)}},computed:{sum:function(){var t=this.day*this.count*this.value.price/500;return this.user&&(t*=this.user.rank.discount),t.toFixed(2)}},methods:{getBook:function(){var t=this;Object(n.f)(this.$route.query.id).then(function(e){t.value=e.data})},getUserIfo:function(){var t=this;Object(r.c)().then(function(e){t.user=e.data})},rent:function(){var t=this;null!=this.user?0!==this.user.status?this.$confirm("确认支付"+this.sum+"元,租借"+this.count+"本"+this.value.bookName+this.day+"天吗?","提示",{confirmButtonText:"支付",cancelButtonText:"取消",type:"warning"}).then(function(){var e={};e.bookId=t.value.bookId,e.userId=t.user.userId,e.rentDay=t.day,e.rentCount=t.count,e.money=t.sum,Object(a.a)(e).then(function(e){t.$message({type:"success",message:"租借成功"})}),t.getBook(),t.getBook(),t.getBook(),t.getBook()}).catch(function(){t.$message({type:"info",message:"已取消支付"})}):this.$message({type:"error",message:"您以违规,没有权限借书,请联系管理员解封"}):this.$message({type:"error",message:"请先登录"})},toIndex:function(){this.$router.push("/customer")}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",[s("el-col",{attrs:{span:12,offset:5}},[s("el-card",{attrs:{align:"center"}},[t.value.img?s("img",{staticClass:"image",attrs:{src:t.value.img,alt:t.value.bookName}}):t._e(),t._v(" "),s("h3",[t._v(t._s(t.value.bookName))]),t._v(" "),s("p",{staticClass:"desc"},[t._v("作者:"+t._s(t.value.author))]),t._v(" "),s("p",{staticClass:"desc"},[t._v("库存:"+t._s(t.value.stock))]),t._v(" "),s("p",{staticClass:"price"},[t._v("售价: "+t._s(t.value.price)+"元")]),t._v(" "),s("p",{staticClass:"price"},[t._v("租价: "+t._s(t._f("formatPrice")(t.value.price/500))+"元 / 天")]),t._v(" "),t.user?s("p",{staticClass:"desc"},[t._v("您是"+t._s(t.user.rank.name)+",享受"+t._s(10*t.user.rank.discount)+"折优惠")]):t._e(),t._v(" "),s("p",[s("b",[t._v("注意: 租价为售价的1/500,结算时四舍五入计算")])]),t._v(" "),s("p",{staticClass:"rent"},[t._v("\n        租借天数:\n        "),s("el-input-number",{attrs:{min:1,max:365,label:"描述文字"},model:{value:t.day,callback:function(e){t.day=e},expression:"day"}})],1),t._v(" "),s("p",{staticClass:"rent"},[t._v("\n        租借数量:\n        "),s("el-input-number",{attrs:{min:1,max:t.value.stock,label:"描述文字"},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1),t._v(" "),s("p",{staticClass:"rent"},[t._v("\n        应付金额:\n        "+t._s(this.sum)+"元\n      ")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.rent}},[t._v("\n        租借\n      ")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.toIndex}},[t._v("\n        返回首页\n      ")])],1)],1)],1)},staticRenderFns:[]};var i=s("VU/8")(o,u,!1,function(t){s("cg1l")},"data-v-1339862c",null);e.default=i.exports},cg1l:function(t,e){}});
//# sourceMappingURL=26.a003105e544f2ab1d5f0.js.map