webpackJsonp([5],{A7HD:function(e,t){},ISr9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),r=a.n(s),i=a("BRgg"),l=a("E4LH"),n={name:"UserInfoDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,rankOptions:[],pwdType:"password",rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],level:[{required:!0,message:"请选择等级",trigger:"blur"}],phoneNum:[{required:!0,validator:function(e,t,a){Object(l.c)(t)?a():a(new Error("请输入正确的手机号码"))},message:"请输入正确的手机号码"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]}}},created:function(){this.getRankList()},methods:{handleEditCreated:function(){this.hasEditCreated=!0},showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},getRankList:function(){var e=this;Object(i.c)({pageNum:1,pageSize:100}).then(function(t){e.rankOptions=[];for(var a=t.data.list,s=0;s<a.length;s++)e.rankOptions.push({label:a[s].name,value:a[s].level})})},handleNext:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"验证失败",type:"error",duration:1e3}),!1;t.$emit("nextStep")})},handleRankChange:function(e){this.value.level=e}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"userInfoForm",staticStyle:{width:"600px"},attrs:{model:e.value,rules:e.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别：",prop:"gender"}},[a("el-select",{attrs:{placeholder:"性别"},model:{value:e.value.gender,callback:function(t){e.$set(e.value,"gender",t)},expression:"value.gender"}},[a("el-option",{key:"0",attrs:{value:"男",label:"男"}}),e._v(" "),a("el-option",{key:"1",attrs:{value:"女",label:"女"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"等级：",prop:"level"}},[a("el-select",{attrs:{placeholder:"等级"},on:{change:e.handleRankChange},model:{value:e.value.level,callback:function(t){e.$set(e.value,"level",t)},expression:"value.level"}},e._l(e.rankOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码：",prop:"phoneNum"}},[a("el-input",{model:{value:e.value.phoneNum,callback:function(t){e.$set(e.value,"phoneNum",t)},expression:"value.phoneNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{attrs:{name:"password",type:e.pwdType,autoComplete:"on",placeholder:"请输入密码"},model:{value:e.value.password,callback:function(t){e.$set(e.value,"password",t)},expression:"value.password"}},[a("span",{attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"},[a("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"eye"}})],1)])],1),e._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.value.status,callback:function(t){e.$set(e.value,"status",t)},expression:"value.status"}},[a("el-option",{key:"1",attrs:{value:"1",label:"可用"}}),e._v(" "),a("el-option",{key:"0",attrs:{value:"0",label:"不可用"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.handleNext("userInfoForm")}}},[e._v("下一步，修改头像")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(n,o,!1,function(e){a("PqlO")},"data-v-49ba62b8",null).exports,c={name:"UserRelationDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{ImageUrl:""}},computed:{url:{get:function(){return"http://101.201.239.223:8090/user/upload/"+this.value.userId},set:function(){}}},methods:{imgPreview:function(e){var t=e.name;/(.jpg|.jpeg|.gif|.png|.bmp)$/.test(t.toLowerCase())?this.ImageUrl=e.url:this.$message.error("请选择图片文件")},success:function(e){200===e.code?(this.$message({message:"头像上传成功",type:"success"}),null!=e.data&&(this.value.headImg=e.data)):this.$message({message:"网络不太好，请重新上传",type:"error"})},handlePrev:function(){this.$emit("prevStep")},handleFinishCommit:function(){this.$emit("finishCommit",this.isEdit)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productRelationForm",staticStyle:{width:"680px"},attrs:{model:e.value,"label-width":"120px",size:"small"}},[e.isEdit?a("p",[e._v("  原头像： "),a("img",{staticClass:"avatar",attrs:{src:e.value.headImg}})]):e._e(),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),e.isEdit?a("p",[e._v("新头像：")]):a("p",[e._v(" 请选择头像")]),e._v(" "),a("el-upload",{staticClass:"upload-poster",attrs:{"list-type":"picture-card",action:e.url,"show-file-list":!1,"on-change":e.imgPreview,"auto-upload":!0,"on-success":e.success}},[e.ImageUrl?a("img",{staticClass:"avatar",attrs:{src:e.ImageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"medium"},on:{click:e.handlePrev}},[e._v("上一步，填写基本")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleFinishCommit}},[e._v("完成，提交")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,p,!1,function(e){a("yN+S")},"data-v-5fab49c3",null).exports,m=a("vMJZ"),v={userId:"",name:"",gender:"",password:"",phoneNum:"",createTime:"",updateTime:"",status:"",headImg:"",rank:"",level:""},h={name:"UserDetail",components:{UserInfoDetail:u,UserRelationDetail:d},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,productParam:r()({},v),showStatus:[!0,!1]}},created:function(){var e=this;this.isEdit&&Object(m.b)(this.$route.query.id).then(function(t){e.productParam=t.data})},methods:{hideAll:function(){for(var e=0;e<this.showStatus.length;e++)this.showStatus[e]=!1},prevStep:function(){this.active>0&&this.active<this.showStatus.length&&(this.active--,this.hideAll(),this.showStatus[this.active]=!0)},nextStep:function(){this.active<this.showStatus.length-1&&(this.active++,this.hideAll(),this.showStatus[this.active]=!0)},finishCommit:function(){var e=this;this.$confirm("是否要提交该产品","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(m.h)(e.$route.query.id,e.productParam).then(function(t){e.$alert("提交成功",{type:"success"}),e.$router.back()})})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[a("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"修改基本信息"}}),e._v(" "),a("el-step",{attrs:{title:"修改头像"}})],1),e._v(" "),a("user-info-detail",{directives:[{name:"show",rawName:"v-show",value:e.showStatus[0],expression:"showStatus[0]"}],attrs:{"is-edit":e.isEdit},on:{nextStep:e.nextStep},model:{value:e.productParam,callback:function(t){e.productParam=t},expression:"productParam"}}),e._v(" "),a("user-relation-detail",{directives:[{name:"show",rawName:"v-show",value:e.showStatus[1],expression:"showStatus[1]"}],attrs:{"is-edit":e.isEdit},on:{prevStep:e.prevStep,finishCommit:e.finishCommit},model:{value:e.productParam,callback:function(t){e.productParam=t},expression:"productParam"}})],1)},staticRenderFns:[]};var g={name:"updateUser",components:{UserDetail:a("VU/8")(h,f,!1,function(e){a("VLbR")},null,null).exports}},b={render:function(){var e=this.$createElement;return(this._self._c||e)("user-detail",{attrs:{"is-edit":!0}})},staticRenderFns:[]};var w=a("VU/8")(g,b,!1,function(e){a("A7HD")},null,null);t.default=w.exports},PqlO:function(e,t){},VLbR:function(e,t){},"yN+S":function(e,t){}});
//# sourceMappingURL=5.fd193b0434c02de01f68.js.map